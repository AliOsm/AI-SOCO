/*................:..:.:..........................::..::.......:..:.:.:.............................
................:.`.:..:............................::...::...::.1;.`...............................
..................#M@R&KXXXXXXXFXXXXXXFFXXXXFFFFYYYYXFKKK#$WNMMMMMMR::..............................
.................:.EMNKFFFFFFFFFFFFFFF&&FFFF&FF&FFFFF&&F&FFF&&FFX&KM@;`.............................
.........`:.;I%MMMMNMM%EEE#EE#EEEEEEEE$W$%@@@@MM@@NNNN%WWE#E$$$$#$E#$MMMNX:.::..``:...`.............
..........::..`'@MMWN%%%W%NMM@NN@@MMMMMMMMMMMMMMMMMMMMMMMMM@NNN%%WW%%W%MM@MMF`..::.:`..:............
.........::..::...X@MM@MMMMMMMMMMMMMM@K]!;,,`'*NRY+',`,,,:'*WMMMMMMMMMMMMMMMMMMME;.:.:.:............
.................,.!MMMMMMM%MM@MR*`,;`,;`,!%NMMM@MMMN>,;`,,;`,,!K@MMMMMMMMMMMMMMMM@~.:.`:......:....
................::...WMMMME";,```,,'`,:&MMM@MMMMMMMM@MM+`,,,``,:;`,'!WMMMMMMMMMMMM@MM@>.`:..`..:....
.................:..:1MM$!,,`;`,`,`',&MMMMM@MMM}>i"]@@M@*`,;;,,`,,,,:;`WMMMMMMMMMMMMMMMN;.:..`.:....
................'@MMM@I`;:;:;,,`,`iMMMMMMMM@l"i!;;,'~!IMM%,:;,`,,,,,,,,,;IM@MMMMMMMMMMMMM@+:.:.:....
.................+MMMMM@M",,:;```#MNM@MMMMW">>!~,,;;:;,+MMY;`:,`,,,,,,,,,,lMMMMMMMMMMMMMMMMY:.......
................:RM%WMMM@MMN~,,$MM@MM@MMMMKi>>;'`,``;`,,,;:,;```,,,,,,,,,,,/MMMMMMMMMMMMMMMMM1......
.........:..:.:.>@MME1"!l%MM@+NMMM/..:..:'MM]~;,,,,,,,,,,,,,,,,,,,,,,,,,,`,,%MMMMMMMMMMMMMMM@M+.:.:.
........:......`M@E::`.::.,MM@M$;:.`:....:,#MI>',,,,,`,,,,,,,,,,,,,,,,,,`,,`YMMMMMMMMMMMMMMMMM@Y...:
........:.::.:.}@M::::.:..."MM&.+*l+.`.:..,1MW">;,`,,,`,,,,,,,,,,,,,,,,,,,,,&MMMMMMMMMMMMMMMMMMM".:.
:..:..`..:.:.`.%MMMMMM::..::MM/MMMMMM~:.:.'>M@>"~,`,,,`,,,,,,,,,,,,,,,,,;:,;@MMMMMMMMMMMMMMMMMMMM`:.
.:..`..`.`]MMMMME@MMMMM$+,;>%M/MMMMM@~::::~]M$>>~,,,,,``,,,,,,,,,,,,,,,,:'`]@MMM@MM@MM@MMMMMMMMMM*::
:.`.::.}MM":::.:.:..``:';KMMMM@:;l]'..,!>;>MM+>!,`,,,,``,,,,,,,,,,,,,,,,``$MNMMMMMW%M@@MMMMMMMMMMM:.
::.:.:lMN`,:.:`....:::,,`,`/MMM@F"~'!!~!iF@MMM@@RI1!,``,,,,,,,,,;;;;;;;,;&MMMM#',`,`,`;&MMMMMMMMMM!.
:..::+M$`,,::::::::```,,,,;,``:,;R@MMMR}`,,,;,``,;,'i]/!;;;'''''''''''~!@M@MN`">">>>>"""XMMMMMMMMM1:
.:::.}M*,,``,``````,,,,,,`,,,,:`~EMMi':::::`,,,,```,',,!'''~~~~~~'"~~!i@MMMMY>"+l]1+>">iXMMMMMMMMM+.
.::..iME'``,`,;`,,,,,,,,,,,'~'>X@K,`;``,`,``,,`,;;'!~~!!!!!"""""!!>!>WMMMMMM"Il+>>>>>>">WMMMMMMMMM,:
..:.:`FMI"!',';~'';;;'~!"!!>!!iN@1~;,;;`;;,%Mli>">"i~!+!">>"!">">""IM@%MMMM@*}i>>>>"ii">@MMMMMMMMM::
:..::WM@%M@I">"i!>>">ii"">>iX@M@@+>>//++IEMMEFF@MN""i"!>!++>>>">F@NER$MMMMM@i">>">i!i+~%MMMMMMMMM#..
.::iNM#&F&RN@N@&I/>i>"i]&NMMMMMMMMM@MMMM@$FKX&FFEMW">!">"ii"+&@MNR&E#%MMMMMM">"">>!i>}@MMMMMMMMMMY.:
.:E@NRKKR&KR&@MMMMMMMMMMMMMMMMMM%RKK&RR#$NMM@@MWRR#$%NN@MNW#RKKKR#EWNMMMMMM@l]]lR%MMMMMMMMMMMMMMM"..
.IMM%K####E#KMM..}YMMMMMMMMMMMMMMMMMMM@MM%I}1+]NMNER#RRR#######EE$%@MMMMMMMMMMMMM@@MMMMMMMMMMMMMM`::
,MMM@MW$$WWE$MM*.:i@M">1+MM',,;!MM~~',.:MM.:..*M@M@W$W$$WW$$$W%%@@MMMMMMMMMMMMMMMMMMMMMMMMMMMMMM1:::
>MMM@MMM@WW%%M%MMMNMX:..:MM::.:.MM...:..@M.+%MM&}@M%%W%WWW%%N@@@MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM....
.@MMMMMMMMMMMMMY::KM}}l#NMMMMM@MMMMMMMNEMM;::...#MM@MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM@*....
.*MMMMMMMM@M@MMMMMMN~:.:"MR:`..`MM,:....%M":`:+MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMl....
:.YMMMMMMMMMMMMMMMMMMMMMMMMMMM%ENM%E@MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM":.::
.:.KM@MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM@MMMMM@K!
.....lMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM@MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM@%I1*}l]lF
.`....:FMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNE$@MMMMMMMMNX]]*l1*}*l]
.........,,RMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM@M@NXIIII*NMM@@NY]]]]]]]]]]]]]]
........::....*MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM@EXIl*Y**YY@@@Fll}]]]]]]]]]]]]]]
.........:~%MNY]]]]lIX&KKR#E$WWWENM@ERW@@@@@@N%%%%%%%%W$#R&FYI****IIII**l}i/@@@$%@@Rl}]l]]]]]]]]]]]]
..:...:`EMMMI]1l]]]]]]]lYFKRK&K&KK@@II*I*I*I*I**IIIIIIII**III**lI*l1i>"">*M@N&RK&K#N@&}]]]]]]]]]]]]]
                                                                                    ——By DD_BOND  */

//#include<bits/stdc++.h>
//#include<unordered_map>
//#include<unordered_set>
#include<functional>
#include<algorithm>
#include<iostream>
//#include<ext/rope>
#include<iomanip>
#include<climits>
#include<cstring>
#include<cstdlib>
#include<cstddef>
#include<cstdio>
#include<memory>
#include<vector>
#include<cctype>
#include<string>
#include<cmath>
#include<queue>
#include<deque>
#include<ctime>
#include<stack>
#include<map>
#include<set>

#define fi first
#define se second
#define pb push_back
#define INF 0x3f3f3f3f
#define pi 3.1415926535898
#define lowbit(a)  (a&(-a))
#define lson l,(l+r)/2,rt<<1
#define rson (l+r)/2+1,r,rt<<1|1
#define Min(a,b,c)  min(a,min(b,c))
#define Max(a,b,c)  max(a,max(b,c))

//#pragma optimize(3)
//#pragma GCC optimize("unroll-loops")
//#pragma comment(linker, "/stack:200000000")
//#pragma GCC optimize("Ofast,no-stack-protector")
//#pragma GCC target("sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,tune=native")

using namespace std;
//using namespace __gnu_cxx;

typedef long long ll;
typedef pair<int,int> P;
typedef unsigned long long ull;

const ll LLMAX=2e18;
const int MOD=1e9+7;
const int MAXN=1e6+10;

template<class T>
inline void read(T &DataIn)
{
    DataIn=0;    T Flag=0;   char c=getchar();
    while(!isdigit(c)){ Flag|=c=='-'; c=getchar(); }
    while(isdigit(c)){ DataIn=DataIn*10+c-'0'; c=getchar(); }
    DataIn= Flag? -DataIn: DataIn;
}

template<class T>
inline void write(T DataOut,char EndChar='\n')
{
    T lenth=0,number[30];
    if(DataOut==0){ putchar(48); return; }
	while(DataOut>0){ number[++lenth]=DataOut%10; DataOut/=10;}
	for(int i=lenth;i>=1;i--)    putchar(number[i]+48);
    putchar(EndChar);
}

priority_queue<int,vector<int>,less<int> > qd;
priority_queue<int,vector<int>,greater<int> > qu;

vector<int>mp[MAXN];
int par[MAXN],son[MAXN],ans[MAXN];

void dfs(int u){
    ans[u]=u;   son[u]=1;
    int MAX=0;
    for(int i=0;i<mp[u].size();i++){
        int v=mp[u][i];
        dfs(v);
        son[u]+=son[v];
        if(son[MAX]<son[v]) MAX=v;
    }
    if(son[MAX]*2>son[u]){
        int now=ans[MAX];
        while((son[u]-son[now])*2>son[u])
            now=par[now];
        ans[u]=now;
    }
}

int main(void)
{
    FILE *fin=NULL,*fout=NULL;
    ios::sync_with_stdio(false);    cin.tie(0);
    //fin=freopen("D:/Project__C++/testdata.in","r",stdin);
    //fout=freopen("D:/Project__C++/testdata.out","w",stdout);
    int n,q;    cin>>n>>q;
    for(int i=2,u;i<=n;i++) cin>>par[i],mp[par[i]].pb(i);
    dfs(1);
    while(q--){
        int x;  cin>>x;
        cout<<ans[x]<<endl;
    }
    return 0;
}
