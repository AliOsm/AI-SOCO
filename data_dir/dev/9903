#include<iostream>
#include<cstdio>
#include<cstring>
int main()
{
    int n,b,d,f[1001],i,j,k;
    char a[1001],c[1001];
    scanf("%d%d%s%s", &b, &d, a, c);
    n=strlen(c);
    for(i=0;i<n;f[i++]=k)
    { 
     k=0;
     for(j=0;a[j];j++) 
      if(c[(i+k)%n]==a[j]) k++;
    }
     long long ans=0;
     for(i=0;i<b;i++)
     {
      k=f[ans%n];
      ans+=k;
     }
    printf("%d", ans/n/d);
}
