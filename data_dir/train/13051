#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
int main() {
	int t;
	cin>>t;
	while(t--){
		int n;
		cin>>n;
		vector<int> v(n);
		for(auto &x:v)
			scanf("%d",&x);
		sort(v.begin(),v.end());
		int res=min(n-2,v[n-2]-1);
		cout<<res<<endl;
	}
	return 0;
}